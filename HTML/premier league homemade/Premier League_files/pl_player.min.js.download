"use strict";PULSE.app.templates.featuredplayerclub='<a href="{{ url }}">{{ clubName }} <span class="playerClub badge-20 {{ altId }}"></span></a>',PULSE.app.templates.overviewstatstable='{{#stats}}<tr><th scope="row">{{ label }}</th><td>{{ stat }}</td></tr>{{/stats}}',function(l,s,t){l.FeaturedPlayer=function(e){var t=this;t.element=e,t.template=t.element.getAttribute("data-template"),t.compSeason=t.element.getAttribute("data-comp-season"),t.clubContainer=t.element.querySelector(".js-player-club"),t.seasonTextContainer=t.element.querySelector(".js-player-comp-season"),t.requestConfig={id:t.element.getAttribute("data-player-id"),comps:l.competition.FIRST,altIds:!0},t.requestConfig.id&&t.initData()},l.FeaturedPlayer.prototype.initData=function(){var e={url:l.common.createApiPath("players.history",this.requestConfig),method:"GET",callback:this.renderFeaturedPlayerMetaInfo,target:this};t.data.manager.add(e)},l.FeaturedPlayer.prototype.renderFeaturedPlayerMetaInfo=function(e){var t=this,a={};if(e){if(!e.currentTeam)return;if(a={url:s.generateContentUrl("club",e.currentTeam.id,e.currentTeam.club.name.replace(new RegExp(" ","g"),"-")),clubName:e.currentTeam.club.name,altId:e.currentTeam.altIds?e.currentTeam.altIds.opta:""},e.teamHistory&&e.teamHistory.details&&0<e.teamHistory.details.length&&t.compSeason)for(var r=0;r<e.teamHistory.details.length;r++){var n=e.teamHistory.details[r];if(parseInt(n.season.competitions[0].compSeason.id)===parseInt(t.compSeason)){a={url:s.generateContentUrl("club",n.team.club.id,n.team.name.replace(new RegExp(" ","g"),"-")),clubName:n.team.name,altId:n.team.altIds?n.team.altIds.opta:""},t.seasonTextContainer.innerHTML=n.season.competitions[0].compSeason.label;break}}var o=Mustache.render(l.templates[t.template],a);t.clubContainer.innerHTML=o}};for(var e=document.querySelectorAll('[data-widget="featured-player"]'),a=0;a<e.length;a++)new l.FeaturedPlayer(e[a])}(PULSE.app,PULSE.app.common,PULSE.core),function(e,t,r){e.playerClubHistory=function(e,t){this.element=e;var a=document.getElementsByClassName("playerHistoryExpand");this.historyCache={},Array.prototype.map.call(a,function(t){["keypress","click"].forEach(function(e){t.addEventListener(e,function(e){if(13===e.which||"click"===e.type){e.preventDefault();var t=this.getAttribute("data-reveal");if(t){var a=document.getElementsByClassName(t);Array.prototype.map.call(a,function(e){r.style.toggleClass(e,"open")}),r.style.toggleClass(this.parentNode,"expanded")}}})})})};for(var a=document.querySelectorAll('[data-widget="player-club-history"]'),n=0;n<a.length;n++)new e.playerClubHistory(a[n],{})}(PULSE.app,PULSE.app.common,PULSE.core),function(n,e,a,o){function l(e,t){if(t&&t.length)for(var a=0;a<t.length;a++)if(e===t[a].name)return t[a].value;return 0}n.playerOverviewStats=function(e,t){var a=this;a.element=e,a.config=t,a.statsTemplate="overviewstatstable",a.positions={D:["appearances","goals","goal_assist","clean_sheet"],G:["appearances","clean_sheet","goals","goal_assist"],M:["appearances","goals","goal_assist"],F:["appearances","goals","goal_assist"]},a.getStats()},n.playerOverviewStats.prototype.getStatModel=function(e,t){var a=[],r=0;for(r=0;r<t.length;r++){var n=l(t[r],e);a.push({label:o.lookup("label.stat."+t[r]),stat:n})}return a},n.playerOverviewStats.prototype.getStats=function(){var e=this;e.requestConfig={id:e.config.playerId,comps:n.competition.FIRST};var t={url:n.common.createApiPath(e.config.path,e.requestConfig),method:"GET",callback:e.renderStats,constant:!0,target:this};a.data.manager.add(t)},n.playerOverviewStats.prototype.renderStats=function(e){var t=this,a=t.getStatModel(e.stats,t.positions[e.entity.info.position]),r=Mustache.render(n.templates[t.statsTemplate],{stats:a});t.element.innerHTML=r};var t=document.querySelectorAll('[data-widget="player-overview-stats"]');t=Array.prototype.map.call(t,function(e){var t={playerId:e.getAttribute("data-player"),path:"stats.player"};return new n.playerOverviewStats(e,t)})}(PULSE.app,PULSE.app.common,PULSE.core,PULSE.I18N),function(e,t){e.playerNav=function(e,t){},e.addWebViewLink=function(e){for(var t=e.querySelectorAll(".btn-tab"),a=void 0,r=0;r<t.length;r++)a=t[r].href,t[r].href=a+"?webview=true"};for(var a=document.querySelectorAll('[data-ui-more-nav="player-nav"]'),r=0;r<a.length;r++){t.style.hasClass(document.querySelector("body"),"webViewBody")&&e.addWebViewLink(a[r]);var n={navWrap:a[r],moreLabel:"More"};new PULSE.ui.moreNav(n)}}(PULSE.app,PULSE.core,PULSE.ui,PULSE.I18N);