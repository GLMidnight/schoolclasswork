"use strict";PULSE.app.templates.clubStadium='<a href="{{ stadiumUrl }}"><span class="stadium">{{ name }}</span></a>',PULSE.app.templates.squadmember='<li><a href="{{ url }}" class="playerOverviewCard {{ activeClass }}"><header class="squadPlayerHeader"><img class="img playerPhotoContainer" data-player="{{ optaId }}" data-size="{{ imageSize }}" src="{{ playerImage }}"> <span class="playerCardInfo">{{#shirtNum}} <span class="number">{{ shirtNum }}</span> {{/shirtNum}}<h4 class="name">{{ name.display }}</h4>{{#positionLabel}} <span class="position">{{positionLabel}}</span> {{/positionLabel}}</span></header><ul class="squadPlayerStats">{{#nationality}}<li class="nationality"><dl><dt class="label">{{ label }}</dt><dd class="info"><span class="flag {{ isoCode }}"></span> <span class="playerCountry">{{ country }}</span></dd></dl></li>{{/nationality}} {{#stats}}<li><dl><dt class="label">{{ label }}</dt><dd class="info">{{ stat }}</dd></dl></li>{{/stats}}</ul><span class="btn widget-button">View Player<span class="icn arrow-right"></span></span> <span class="icn arrow-right linkIndicator"></span></a></li>',PULSE.app.templates.squadmemberlist='<h6>{{ positionLabel }}</h6><ul>{{#players}}<li class="squadMember"><a href="{{ url }}"><span class="squadNumber">{{shirtNum}}</span> {{ name.display }} <span class="icn arrow-right"></span></a></li>{{/players}}</ul>',PULSE.app.templates.clubstandings='{{#table}}<tr class="{{ rowClass }}"><td class="pos">{{ position }} <span class="movement {{ movement }}"></span></td><td class="team"><a href="{{ url }}"><span class="badge-20 {{ team.altIds.opta }}"></span> <span class="long">{{ teamName }}</span> <span class="short">{{ teamName }}</span></a></td><td>{{ overall.played }}</td><td>{{ overall.goalsDifference}}</td><td class="points">{{ overall.points }}</td></tr>{{/table}}',PULSE.app.templates.clubmatch='<div class="day"><time>{{day.day}} <strong>{{day.other}}</strong> </time>{{#matches}} {{#isFixture}} <span><span class="overview"><a href="{{ matchUrl }}" class="matchAbridged" data-matchid="{{ id }}"><span class="teamName"><abbr title="{{ teams.0.team.club.name }}">{{ teams.0.team.club.abbr }}</abbr></span> <span class="badge-20 {{ teams.0.opta }}"></span> <time datetime="14:00">{{ kickOffTime }}</time> <span class="badge-20 {{ teams.1.opta }}"></span> <span class="teamName"><abbr title="{{ teams.1.team.club.name }}">{{ teams.1.team.club.abbr }}</abbr></span> <span data-id="{{ id }}" class="matchSummaryBroadcastersContainer"></span> <span class="icn arrow-right"></span> </a></span></span>{{/isFixture}} {{#isResult}} <span><span class="overview"><a href="{{ matchUrl }}" class="matchAbridged form"><span class="teamForm {{ outcomeClass }}">{{ teamOutcome }}</span> <span class="teamName"><abbr title="{{ teams.0.team.club.name }}">{{ teams.0.team.club.abbr }}</abbr></span> <span class="badge-20 {{ teams.0.opta }}"></span> <span class="score">{{ teams.0.score }}<span>-</span>{{ teams.1.score }}</span> <span class="badge-20 {{ teams.1.opta }}"></span> <span class="teamName"><abbr title="{{ teams.1.team.club.name }}">{{ teams.1.team.club.abbr }}</abbr></span> <span class="icn arrow-right"></span> </a></span></span>{{/isResult}} {{/matches}}</div>',PULSE.app.templates.embeddablematchdate='<div class="day"><time>{{ date }}</time> <span class="{{ date }}MatchContainer"></span></div>',PULSE.app.templates.refereematchdate='<div class="day"><time>{{ date }}</time> <span class="{{ date }}MatchContainer"></span></div>',function(e,t,l){var m=0;e.clubArchive=function(t,a){var e=this;e.widget=t;var s=e.widget.parentNode,n=a.length;if(e.widget.hasChildNodes()||m++,m===n){var i=document.createElement("div"),r=document.createElement("span"),o=document.createTextNode(l.lookup("label.nocontentForClubArchive"));r.appendChild(o),i.appendChild(r),i.className="noContentContainer",s.insertBefore(i,a[0])}};!function(){for(var t=document.querySelectorAll('[data-widget="club-archive"]'),a=0;a<t.length;a++)new e.clubArchive(t[a],t)}()}(PULSE.app,PULSE.core,PULSE.I18N),function(o,a,t,l){o.clubHeader=function(t,a){var e=this;e.element=t,e.teamId=e.element.getAttribute("data-team"),e.id=e.element.getAttribute("data-id"),e.stadiumName=e.element.getElementsByClassName("stadiumName");var s=document.getElementById("mainContent");e.teamId&&(s.className="sidebarContainer "+e.teamId);var n=e.element.getElementsByClassName("clubBadgeFallback"),i=e.element.getElementsByClassName("badgeContainer");n&&0<n.length&&i&&0<i.length&&(n[0].onerror=function(){i[0].style.display="none"},n[0].setAttribute("src",n[0].getAttribute("src"))),e.initData()},o.clubHeader.prototype.initData=function(){var t={url:o.environment.api+"/football/clubs/"+this.id,method:"GET",callback:this.renderTeamGround,constant:!0,target:this};a.data.manager.add(t)},o.clubHeader.prototype.renderTeamGround=function(t){for(var a,e=this,s=0;s<t.teams.length;s++)t.teams[s].id==e.id&&(a=t.teams[s].grounds);if(a&&a.length){var n={};n=a[0];var i=t.name.replace(/\s/g,"-");n.stadiumUrl=l.generateContentUrl("stadium",e.id,i);var r=Mustache.render(o.templates.clubStadium,n);e.stadiumName[0].innerHTML=r}};for(var e=document.querySelectorAll('[data-widget="club-header"]'),s=0;s<e.length;s++)new o.clubHeader(e[s],{})}(PULSE.app,PULSE.core,PULSE.ui,PULSE.app.common),function(l,a,m){function c(t,a){var e,s;return t.teams&&(t.teams.map(function(t){t.team.id==a?e=t.score:s=t.score,t.team.club||(t.team.club={}),t.team.club.abbr||(t.team.club.abbr="TBC"),t.team.name||(t.team.abbr="TBC"),t.team.shortName||(t.team.shortName=t.team.name),t.opta=t.team.altIds&&t.team.altIds.opta?t.team.altIds.opta:""}),t.teamOutcome="",null!=e&&null!=s&&"C"===t.status?s<e?(t.teamOutcome="W",t.outcomeClass="win"):e<s?(t.teamOutcome="L",t.outcomeClass="lose"):(t.teamOutcome="D",t.outcomeClass="draw"):t.kickOffTime=moment(t.kickoff.millis).locale(l.language).tz(moment.tz.guess()).format("HH:mm"),t.matchUrl=l.common.getMatchCentreUrl(t)),"C"===t.status?t.isResult=!0:t.isFixture=!0,t}l.clubMatches=function(t,a){var e=this;if(e.element=t,e.isRendered=t.getAttribute("data-rendered")||!1,!e.isRendered){e.isSummary=t.getAttribute("data-summary"),e.isRefereeSummary=t.getAttribute("data-referee-summary"),e.fixturesIds=t.getAttribute("data-fixturesids");a.noData;if(e.urlConfig={},e.urlConfig.compSeasons=a.season,e.urlConfig.comps=a.comp,e.urlConfig.teams=a.team||t.getAttribute("data-team"),e.urlConfig.statuses=t.getAttribute("data-statuses"),e.urlConfig.pageSize=t.getAttribute("data-pagesize"),e.urlConfig.page=0,e.urlConfig.altIds=!0,"C"===e.urlConfig.statuses&&(e.urlConfig.sort="desc"),t.getAttribute("data-sort")&&(e.urlConfig.sort=t.getAttribute("data-sort")),e.broadcastingConfig={},t.getAttribute("data-broadcaster-location")&&(e.broadcastingConfig.countryCodes=t.getAttribute("data-broadcaster-location")),e.matchListContainer=e.element.getElementsByClassName("matchListContainer"),e.fixturesAbridged=e.element.getElementsByClassName("fixturesAbridged"),e.matchListContainer&&e.matchListContainer.length,e.teamId=e.urlConfig.teams,e.teamId||!e.fixturesIds)e.initData(e.urlConfig);else{new m.getBroadcasters(e.element,{containerClass:"matchSummaryBroadcastersContainer"},e.broadcastingConfig);m.renderKickOffData(e.element,{className:"renderKOContainer",format:"HH:mm"}),e.matchListContainer=e.element.getElementsByClassName("matchListContainer"),e.matchListContainer&&0<e.matchListContainer.length&&(e.isRefereeSummary?m.orderKickOffs(e.element,e.matchListContainer[0],l.templates.refereematchdate,{format:"dddd D MMMM YYYY",className:"embeddableMatchContainer"}):m.orderKickOffs(e.element,e.matchListContainer[0],l.templates.embeddablematchdate,{format:"dddd D MMMM",className:"embeddableMatchContainer"}))}e.element.setAttribute("data-rendered",!0)}},l.clubMatches.prototype.initData=function(t){var a={url:l.common.createApiPath("fixtures.all",t),method:"GET",callback:this.renderMatches,target:this};this.startData(a)},l.clubMatches.prototype.startData=function(t){a.data.manager.add(t)},l.clubMatches.prototype.refresh=function(){this.renderMatches(this.thisData)},l.clubMatches.prototype.renderMatches=function(t){var a,e=this;if((e.thisData=t)&&t.content){t.content;var s=[],n=function(t){var a={};if(t&&t.length)for(var e,s=0;s<t.length;s++)3===t[s].kickoff.completeness&&(a[e=new Date(t[s].kickoff.millis).toISOString().split("T")[0]]||(a[e]=[]),a[e].push(t[s]));return a}(t.content);if(0<e.matchListContainer.length){var i="";for(var r in n){n[r].forEach(function(t){t=c(t,e.teamId),s.push(t.id)});var o=(a=new Date(r),{day:moment(a).locale(l.language).format("dddd"),other:moment(a).locale(l.language).format("D MMMM")});i+=Mustache.render(l.templates.clubmatch,{day:o,matches:n[r]})}e.matchListContainer[0].innerHTML=i}if(e.element.style.display="",0<s.length)new m.getBroadcasters(e.element,{containerClass:"matchSummaryBroadcastersContainer"})}else e.element.style.display="none"};var t=document.querySelectorAll('[data-widget="club-matches"]');t=Array.prototype.map.call(t,function(t){return new l.clubMatches(t,{})})}(PULSE.app,PULSE.core,PULSE.app.common,PULSE.ui),function(t,a){t.clubNav=function(t,a){};for(var e=document.querySelectorAll('[data-ui-more-nav="club-nav"]'),s=0;s<e.length;s++){var n={navWrap:e[s],moreLabel:"More",iconClass:"menu-more"};new a.moreNav(n)}}(PULSE.app,PULSE.ui,PULSE.I18N),function(l,a,m,e,c){l.clubSquad=function(t,a){var e=this;e.element=t,e.requestConfig={},e.requestConfig.compSeasonId=e.element.getAttribute("data-comp-season"),e.requestConfig.id=e.element.getAttribute("data-team"),e.requestConfig.altIds=!0,e.requestConfig.compCodeForActivePlayer=l.defaultCompCode,e.squadListContainer=e.element.getElementsByClassName("squadListContainer"),e.filterControllerElement=e.element.querySelector("section.pageFilter"),e.filterControllerElement&&(e.compSeasonsInit=!1,e.filterController=new l.common.listFilterController(e.filterControllerElement,{dropdowns:l.filterGroups[e.filterControllerElement.getAttribute("data-filter-config")],delegate:e}))},l.clubSquad.prototype.filterCleared=function(t){this.filterUpdated(t)},l.clubSquad.prototype.filterUpdated=function(t,e,a){var s=this;!s.compSeasonsInit&&t[0]&&(s.compSeasonsInit=new m.listFilterClubSeasons(t[0].state.list,s.requestConfig.id,s.filterController));var n=s.requestConfig.compSeasonId;t.map(function(t){var a=e&&-1!=t.autoId&&null!=t.autoId?t.autoId:t.state.id;switch(t.name){case"compSeasons":s.requestConfig.compSeasonId=a,"0"===t.state.index?s.requestConfig.date=moment(new Date).locale(l.language).format("YYYY-MM-DD"):s.requestConfig.date=void 0}}),e&&n==s.requestConfig.compSeasonId||s.initData()},l.clubSquad.prototype.initData=function(){var t=this,a={url:l.common.createApiPath("teams.single.staff",t.requestConfig),method:"GET",callback:t.renderSquad,target:this};!t.dataLoader&&t.squadListContainer&&0<t.squadListContainer.length?t.dataLoader=new e.loader(t.squadListContainer[0],{init:!0,loaderTemplate:l.templates.loader}):t.dataLoader&&t.dataLoader.addLoader(),this.startData(a)},l.clubSquad.prototype.startData=function(t){a.data.manager.add(t)},l.clubSquad.prototype.renderSquad=function(t){var a,e,s,n,i,r;if(t&&t.players){var o="";(a=t.players,e=[],s=[],n=[],i=[],r=[],a&&0<a.length&&(a.forEach(function(t){"GOALKEEPER"===t.latestPosition?e.push(t):"DEFENDER"===t.latestPosition?s.push(t):"MIDFIELDER"===t.latestPosition?n.push(t):"FORWARD"===t.latestPosition&&i.push(t)}),s=s.concat(n,i),r=e.concat(s)),r).forEach(function(t){var a,e=((a=t).url=m.generateContentUrl("player",a.id,a.name.display.replace(new RegExp(" ","g"),"-")),a.imageSize="110x140",a.playerImage=m.getDefaultPlayerImg(a.imageSize),a.optaId=a.altIds&&a.altIds.opta?a.altIds.opta:void 0,a.activeClass=a.active?"active":"inactive",a.info&&a.info.shirtNum&&(a.shirtNum=a.info.shirtNum),a.latestPosition&&(a.positionLabel=c.lookup("label."+a.latestPosition.toLowerCase())),a.nationalTeam?a.nationality={country:a.nationalTeam.country,isoCode:a.nationalTeam.isoCode,label:c.lookup("label.player.nationality")}:a.birth&&a.birth.country&&a.birth.country.country&&a.birth.country.isoCode&&(a.nationality={country:a.birth.country.country,isoCode:a.birth.country.isoCode,label:c.lookup("label.player.nationality")}),a.stats=[],a.stats.push({label:c.lookup("label.stat.appearances"),stat:null!=a.appearances?a.appearances:"0"}),!a.latestPosition||"GOALKEEPER"!==a.latestPosition&&"DEFENDER"!==a.latestPosition||a.stats.push({label:c.lookup("label.stat.clean_sheet"),stat:null!=a.cleanSheets?a.cleanSheets:"0"}),a.latestPosition&&"GOALKEEPER"!=a.latestPosition&&a.stats.push({label:c.lookup("label.stat.goals"),stat:null!=a.goals?a.goals:"0"}),a.latestPosition&&"GOALKEEPER"!=a.latestPosition&&"DEFENDER"!=a.latestPosition&&a.stats.push({label:c.lookup("label.stat.assists"),stat:null!=a.assists?a.assists:"0"}),a);o+=Mustache.render(l.templates.squadmember,e)}),this.squadListContainer&&0<this.squadListContainer.length&&(this.squadListContainer[0].innerHTML=o,m.getPhotosForContainer(this.squadListContainer[0]))}};l.filterGroups.setData(function(){for(var t=document.querySelectorAll('[data-widget="club-squad"]'),a=0;a<t.length;a++)new l.clubSquad(t[a],{noData:!0})})}(PULSE.app,PULSE.core,PULSE.app.common,PULSE.ui,PULSE.I18N),function(n,a,i,s,r){function o(t){var s={};return t&&0<t.length&&t.forEach(function(t){var a,e=t.latestPosition?t.latestPosition:"Other";s[e]||(s[e]=[]),s[e].push(((a=t).url=i.generateContentUrl("player",a.id,a.name.display.replace(new RegExp(" ","g"),"-")),a.shirtNum=a.info&&a.info.shirtNum?a.info.shirtNum:"",a.latestPosition&&(a.positionLabel=r.lookup("label."+a.latestPosition.toLowerCase())),a))}),s}function l(t,a){var e="";if(t&&t[a]){var s={players:t[a],positionLabel:r.lookup("label."+a.toLowerCase())};e+=Mustache.render(n.templates.squadmemberlist,s)}return e}n.clubSquadList=function(t,a){var e=this;e.element=t,e.requestConfig={},e.requestConfig.date=moment(new Date).locale(n.language).format("YYYY-MM-DD"),e.requestConfig.compSeasonId=a&&a.season?a.season:e.element.getAttribute("data-comp-season"),e.requestConfig.id=a&&a.team?a.team:e.element.getAttribute("data-team"),e.requestConfig.altIds=!0,e.squadListContainer=e.element.getElementsByClassName("cubSquadListContainer"),e.squadListContainer&&0<e.squadListContainer.length&&(e.dataLoader=new s.loader(e.squadListContainer[0],{init:!0,loaderTemplate:n.templates.loader})),e.initData()},n.clubSquadList.prototype.initData=function(){var t={url:n.common.createApiPath("teams.single.staff",this.requestConfig),method:"GET",callback:this.renderSquad,target:this};this.startData(t)},n.clubSquadList.prototype.startData=function(t){a.data.manager.add(t)},n.clubSquadList.prototype.refresh=function(){this.renderSquad(this.thisData)},n.clubSquadList.prototype.renderSquad=function(t){var a=this;if((a.thisData=t)&&t.players){var e="";if(0<t.players.length){var s=o(t.players);e+=l(s,"GOALKEEPER"),e+=l(s,"DEFENDER"),e+=l(s,"MIDFIELDER"),e+=l(s,"FORWARD"),a.squadListContainer&&0<a.squadListContainer.length&&(a.squadListContainer[0].innerHTML=e),a.element.style.display=""}else a.element.style.display="none"}else a.element.style.display="none"}}(PULSE.app,PULSE.core,PULSE.app.common,PULSE.ui,PULSE.I18N),function(r,a,o,s){r.clubStandings=function(t,a){var e=this;e.element=t,e.teamId=a.team||t.getAttribute("data-team"),e.max=t.getAttribute("data-max"),e.urlConfig={},e.urlConfig.live=t.getAttribute("data-live"),e.urlConfig.altIds=!0,e.urlConfig.compSeasons=a.season,e.standingsContainer=e.element.getElementsByClassName("standingEntriesContainer"),e.standingsContainer&&0<e.standingsContainer.length&&(e.dataLoader=new s.loader(e.standingsContainer[0],{init:!0,loaderTemplate:r.templates.loader})),e.getStandings()},r.clubStandings.prototype.getStandings=function(){var t={url:r.common.createApiPath("standings.all",this.urlConfig),method:"GET",callback:this.renderTable,target:this};this.startData(t)},r.clubStandings.prototype.startData=function(t){a.data.manager.add(t)},r.clubStandings.prototype.refresh=function(){this.renderTable(this.thisData)},r.clubStandings.prototype.renderTable=function(t){var e=this;if((e.thisData=t)&&t.tables&&0<t.tables.length&&t.tables){var a=[],s=-1,n={below:0,above:a.length};if(null!=e.teamId&&null!=e.max){var i=function(t,a){for(var e=0;e<t.length;e++)if(1===t.length||t[e].groupName)for(var s=0;s<t[e].entries.length;s++)if(t[e].entries[s].team.id==a)return{table:e,team:s};return{table:-1,team:-1}}(t.tables,e.teamId);-1<i.table&&(a=t.tables[i.table].entries,a=-1<(s=i.team)?(n=function(t,a,e){var s,n;(e-1)%2!=1?s=n=(e-1)/2:n=e/2;var i=a-n;if(i<0){var r=0-i;i=0,s+=r}var o=a+s;if(o>t.length-1){r=o-(t.length-1);o=t.length-1,(i=a-(n+=r))<0&&(r=0-i,i=0)}return{below:i,above:o}}(a,s,e.max),a.slice(n.below,n.above+1)):a.slice(0,e.max))}else null!=e.max&&(a=a.slice(0,e.max));0<a.length?(a.map(function(t){if(t.team.id==e.teamId){var a=t.team.altIds&&t.team.altIds.opta?t.team.altIds.opta+"-bg":"";t.rowClass="clubHighlight "+a}else t.rowClass="";t.movement="none",t.position<t.startingPosition?t.movement="up":t.startingPosition<t.position&&(t.movement="down"),t.teamName=t.team.club.shortName||t.team.name,t.url=o.generateContentUrl("club",t.team.club.id,t.team.club.name.replace(new RegExp(" ","g"),"-"))}),0<e.standingsContainer.length&&(e.standingsContainer[0].innerHTML=Mustache.render(r.templates.clubstandings,{table:a})),e.element.style.display=""):e.element.style.display="none"}else e.element.style.display="none"}}(PULSE.app,PULSE.core,PULSE.app.common,PULSE.ui),function(r,e,o){r.clubTabs=function(t,a){var s=this;s.activated=[],s.currentSeasons={},s.element=t,s.tabData={},s.tabs=new e.tab({wrap:s.element,selector:"[data-ui-tab]",activeClass:"active",builtClass:"tabbed",tabParam:"tableSection",tabCallback:function(e){e.config.tabs.forEach(function(t,a){e.config.current===t&&s.showTabs(e)})}})},r.clubTabs.prototype.showTabs=function(t){var a=this,e=t.config.current.uiArgs.type;a.type=e,a.teamId=t.config.current.uiArgs.teamId,a.currentSeasons[e]?(a.compSeason=a.currentSeasons[e],a.resetTabs()):a.findCurrentSeason(e)},r.clubTabs.prototype.resetTabs=function(){var e=this;e.tabData[e.teamId]||(e.tabData[e.teamId]={matches:[],standings:[],squad:[]});var t=document.querySelectorAll('[data-widget="club-standings"]');Array.prototype.map.call(t,function(t,a){e.tabData[e.teamId].standings[a]?e.tabData[e.teamId].standings[a].refresh():e.tabData[e.teamId].standings.push(new r.clubStandings(t,{season:e.compSeason,team:e.teamId}))});var a=document.querySelectorAll('[data-widget="club-matches"]');Array.prototype.map.call(a,function(t,a){e.tabData[e.teamId].matches[a]?e.tabData[e.teamId].matches[a].refresh():e.tabData[e.teamId].matches.push(new r.clubMatches(t,{team:e.teamId,comp:r.competition[e.type]}))});var s=document.querySelectorAll('[data-widget="club-squad-list"]');Array.prototype.map.call(s,function(t,a){e.tabData[e.teamId].squad[a]?e.tabData[e.teamId].squad[a].refresh():e.tabData[e.teamId].squad.push(new r.clubSquadList(t,{season:e.compSeason,team:e.teamId}))})},r.clubTabs.prototype.findCurrentSeason=function(t){var a,e=r.competition[t];if(e instanceof Array){var s=parseInt(this.teamId,10);for(var n in r.competitionTeams)if(-1<r.competitionTeams[n].indexOf(s)){a=n;break}a=a||a[0]}else a=e;var i={url:r.common.createApiPath("competition.current",{id:a}),method:"GET",callback:this.getSeason,target:this,forceCallback:!0,compType:t};o.data.manager.add(i)},r.clubTabs.prototype.getSeason=function(t,a){t&&t.id&&a&&a.compType&&(this.compSeason=t.id,this.currentSeasons[a.compType]=this.compSeason,this.resetTabs())};for(var t=document.querySelectorAll('[data-widget="club-tabs"]'),a=0;a<t.length;a++)new r.clubTabs(t[a],{})}(PULSE.app,PULSE.ui,PULSE.core,PULSE.app.common);